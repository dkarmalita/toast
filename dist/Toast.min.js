`use strict`,require("./Toast.css");class Toast{constructor(a){if(!a.message){throw new Error("Toast.js - You need to set a message to display")}this.options=a,this.options.type=a.type||"default",this.toastContainerEl=document.querySelector(".toastjs-container"),this.toastEl=document.querySelector(".toastjs"),this._init()}_init(){Promise.resolve().then(()=>this.toastContainerEl?Promise.resolve():this._createElements()).then(()=>"false"==this.toastContainerEl.getAttribute("aria-hidden")?this._close():Promise.resolve()).then(()=>{this._open(),this._addEventListeners()})}_open(){this.toastEl.classList.add(this.options.type),this.toastContainerEl.setAttribute("aria-hidden",!1);let a="";this.options.customButtons&&(a=this.options.customButtons.map(a=>`<button type="button" class="toastjs-btn toastjs-btn--custom">${a.text}</button>`),a=a.join("")),this.toastEl.innerHTML=`
          <p>${this.options.message}</p>
          <button type="button" class="toastjs-btn toastjs-btn--close">Close</button>
          ${a}
      `,this.focusedElBeforeOpen=document.activeElement,document.querySelector(".toastjs-btn--close").focus()}_close(){return new Promise(a=>{this.toastContainerEl.setAttribute("aria-hidden",!0),setTimeout(()=>{this.toastEl.innerHTML="",this.toastEl.classList.remove("default","success","warning","danger"),this.focusedElBeforeOpen&&this.focusedElBeforeOpen.focus(),a()},1e3)})}_addEventListeners(){if(document.querySelector(".toastjs-btn--close").addEventListener("click",()=>{this._close()}),this.options.customButtons){const a=Array.prototype.slice.call(document.querySelectorAll(".toastjs-btn--custom"));a.map((a,b)=>{a.addEventListener("click",a=>this.options.customButtons[b].onClick(a))})}}_createElements(){return new Promise(a=>{this.toastContainerEl=document.createElement("div"),this.toastContainerEl.classList.add("toastjs-container"),this.toastContainerEl.setAttribute("role","alert"),this.toastContainerEl.setAttribute("aria-hidden",!0),this.toastEl=document.createElement("div"),this.toastEl.classList.add("toastjs"),this.toastContainerEl.appendChild(this.toastEl),document.body.appendChild(this.toastContainerEl),setTimeout(()=>a(),500)})}}module.exports={Toast};